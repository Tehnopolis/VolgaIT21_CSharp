# Об репозитории
Volga IT 2021 - C# Задача - Отборочный этап - Решение 

# Как запустить
Требования:
- Visual Studio 2019+
- .NET 5

В Visual Studio потребуется открыть два проекта:
- WebpageAnalyzer/WebpageAnalyzer/WebpageAnalyzer.csproj
- WebpageAnalyzer/WebpageAnalyzer.Tests/WebpageAnalyzer.Tests.csproj

(Или создать пустое решение VS2019+ и добавить туда два этих проекта)

# Как работает и Архитектура

### WebpageAnalyzer.csproj
Проект является консольной программой, которая при запуске выводит сообщение: "Укажите путь до файла, которое потребуется обработать", и ждет ввода от пользователя.
После этого программа создает экземпляр класса `new Analyzer(IReader, ICleaner, IWriter)` и вызывает метод `Process()`, который:
1. Читает файл, указанный пользователем (с помощью указанного `IReader`)
2. Разбивает текст на слова (с помощью класса `Splitter`)
3. Очищает массив слов от ненужных, то есть от HTML тегов в данном случае (с помощью указанного `ICleaner`)
4. Подсчитывает сколько раз встречалось каждое слово и сортирует статистику (с помощью класса `Counter`)
5. Выводит статистику в консоль
6. Сохраняет статистику (с помощью указанного `IWriter`)
7. Сохраняет лог в файлы (В текущей папке выполнения, в файл `Log.txt` - весь лог и `Errors.txt` - только ошибки)

Проект состоит из:
- `Program.cs` (Входная точка для программы, алгоритм действий программы описан выше)
- `Analyzer.cs` (Входная точка для программы, алгоритм действий программы описан выше)
- `namespace WebpageAnalyzer.Components` (Классы для различных компонентов обработки)
  - `Reader.cs` (Класс `Reader`, позволяет безопасно читать файл по указанному пути, имеет метод `Read`, который читает файл и учитывает, что размер файла может превышать доступное место в памяти)
  - `Splitter.cs` (Класс `Splitter`, позволяет разбивать текст на слова по указанным символам-разбивателям, имеет поле `Splitters`, которое определяет какие символы будут разбивателями слов, имеет метод `Split`, который разбивает текст на слова и выдает массив)
  - `Cleaner.cs` (Класс `Cleaner`, позволяет убирать лишние символы из слов в массиве и убирать лишние слова из массива, имеет метод `Clean`, который очищает массив слов путем вызова делегата `Filter`, класс также имеет поле `Filter`, которое хранит делегат, принимающий аргумент в виде слова, и при вызове которого, он должен возвратить измененное слово или пустую строку)
  - `Counter.cs` (Класс `Counter`, позволяет подсчитывать сколько раз слово встретилось в массиве, также сортирует результат, имеет метод `Count`, который выдает статиску по количеству каждого слова в массиве, если аргумент `sort` был `true`, то также сортирует результат, также имеет поле `CaseSensetive`, которое определяет нужно ли учитывать регистр у слов в массиве)
- `namespace WebpageAnalyzer.Log` (Классы для лога)
  - `Logger.cs`(Статический класс `Logger`, который хранит сообщения лога в виде `List<LogMessage>`, имеет метод `Add` для добавления сообщения в лог, имеет поле `WriteToConsole`, определяющее выводить ли лог в консоль в реальном времени)
  - `LogMessage.cs`(Структура `LogMessage`, которая хранит данные о сообщении лога - Дату с Временем, Сообщение, Тип Сообщения `MessageType`)

### WebpageAnalyzer.Tests.csproj
Проект является тестами MSTest, которые проверяют функционал классов `Splitter`,`Cleaner`,`Counter` в проекте *WebpageAnalyzer.csproj*

Проект состоит из:
- `SplitterTests.cs` (Проверяет класс `Splitter` на правильность разбиения текста одним символом и несколькими)
- `CleanerTests.cs` (Проверяет класс `Cleaner` на правильность фильтрации по нескольким правилам)
- `CounterTests.cs` (Проверяет класс `Counter` на правильность подсчета с учетом регистра и без)
